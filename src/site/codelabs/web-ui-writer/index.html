<html><head><title>IO 2013 Dart Codelab</title><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=chteh0fSOiSrmusp8u43YAdDjahd2IAEL5IFmyNQJ7o');ol{margin:0;padding:0}.c29{vertical-align:top;width:504pt;border-style:solid;background-color:#ead1dc;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c19{vertical-align:top;width:648pt;border-style:solid;background-color:#f3f3f3;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c26{vertical-align:top;width:144pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c21{list-style-type:lower-roman;margin:0;padding:0}.c43{max-width:648pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c12{list-style-type:decimal;margin:0;padding:0}.c33{list-style-type:disc;margin:0;padding:0}.c37{color:#999999;font-size:24pt;font-family:"Open Sans"}.c28{color:#a64d79;font-size:12pt;font-family:"Trebuchet MS"}.c23{list-style-type:lower-latin;margin:0;padding:0}.c24{color:#666666;font-size:12pt;font-family:"Trebuchet MS"}.c3{line-height:1.0;margin-left:72pt}.c15{color:inherit;text-decoration:inherit}.c36{padding-top:18pt;padding-bottom:4pt}.c41{font-size:36pt;font-family:"Open Sans"}.c0{direction:ltr;margin-left:36pt}.c27{padding-top:24pt;padding-bottom:6pt}.c40{margin:5px;border:1px solid black}.c18{color:#1155cc;text-decoration:underline}.c45{font-size:24pt;font-family:"Open Sans"}.c7{padding-left:0pt;margin-left:72pt}.c20{height:13pt}.c11{padding-left:0pt}.c44{font-size:36pt}.c13{font-style:italic}.c31{color:#ff0000}.c38{height:12pt}.c4{line-height:1.0}.c10{text-align:right}.c6{font-weight:bold}.c2{direction:ltr}.c30{font-family:"Consolas"}.c8{height:11pt}.c25{margin-left:72pt}.c34{color:#a64d79}.c46{color:#333333}.c32{font-size:18pt}.c22{height:0pt}.c1{font-family:"Courier New"}.c9{border-collapse:collapse}.c42{line-height:1.5}.c39{font-size:12pt}.c14{margin-left:108pt}.c17{height:16pt}.c16{text-align:center}.c5{text-decoration:line-through}.c35{color:#4a86e8}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c43"><p class="c27 c2 c16 title"><a name="h.w7msts8n8z9n"></a><img height="268" src="images/image30.png" width="616"></p><p class="c27 c2 c8 c16 title"><a name="h.xmhzbcbrfser"></a></p><p class="c2 c16 c27 title"><a name="h.umyrvsj374pd"></a><span class="c6 c37">Dart on the Modern Web</span></p><p class="c27 c2 c16 title"><a name="h.unvuoq9jdbtg"></a><span class="c37 c6">Google I/O 2013 &mdash; Code lab</span></p><p class="c2 c8"><span></span></p><p class="c27 c2 title"><a name="h.kerookz5dcyr"></a><span class="c6 c41">Dart on the Modern Web</span><img height="133" src="images/image18.png" width="133"></p><p class="c2 c36 subtitle"><a name="h.lmjlnm6y08c9"></a><span class="c45">Using Dart to Build a Modern Web App</span></p><h1 class="c27 c2"><a name="h.r18vdncm6tad"></a><span class="c6 c32">Dart code lab for Google I/O 2013</span></h1><hr style="page-break-before:always;display:none;"><p class="c2 c8"><span></span></p><h1 class="c2"><a name="h.cgzc3lhbqumi"></a><span>Introduction</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>Welcome to Dart! We built Dart to help developers from all platforms build awesome apps for the modern web. Dart compiles to JavaScript to run across all modern browsers. Dart is an easy-to-learn language at the hub of &nbsp;a powerful set of tools for structured web app engineering. The Dart SDK contains a rich set of libraries, a powerful editor, a package manager, and much more.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>In this code lab, you&rsquo;ll build a simple, single-page, modern web app for desktop and mobile.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>You will learn:</span></p><p class="c2 c8"><span></span></p><ol class="c33" start="1"><li class="c0 c11"><span>A bit of the Dart language and libraries</span></li><li class="c0 c11"><span>Client-side templating</span></li><li class="c0 c11"><span>Declarative dynamic DOM generation</span></li><li class="c0 c11"><span>MDV-style data binding to sync UI elements with data</span></li><li class="c0 c11"><span>How to use the Dart HTML and Web UI libraries</span></li><li class="c0 c11"><span>How to store data locally in your browser</span></li><li class="c0 c11"><span>Optimizing for </span><span>mobile</span><span>&nbsp;devices</span></li></ol><h2 class="c2"><a name="h.wybq4zhendq"></a><span>Prerequisites</span></h2><p class="c2 c8"><span></span></p><p class="c2"><span>This code lab assumes that you are familiar with web programming (HTML, CSS) and object-oriented programming. You do not need to be an expert in web programming to enjoy this code lab.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>This code lab requires Dart Editor, which you will download and install in Step 0</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span class="c6">Note:</span><span>&nbsp;Dart Editor runs on Windows (Vista, 7, or 8), Linux, or Mac.</span></p><hr style="page-break-before:always;display:none;"><h2 class="c2 c20"><a name="h.5zllog3hfc9l"></a></h2><h2 class="c2"><a name="h.dqo0342x5tkd"></a><span>Resources</span></h2><p class="c2 c8"><span></span></p><p class="c2"><span>There are numerous </span><span>resources for the new Dart developer</span><span>. Here are some of our</span><span>&nbsp;recommendations:</span></p><p class="c2 c8"><span></span></p><ol class="c33" start="1"><li class="c0 c11"><span class="c18"><a class="c15" href="http://www.dartlang.org/docs/tutorials/">A Game of Darts - Tutorials</a></span></li><li class="c0 c11"><span class="c18"><a class="c15" href="http://www.dartlang.org/docs/tutorials/web-ui/">Target 6: Get Started with Web UI</a></span></li><li class="c0 c11"><span class="c18"><a class="c15" href="http://www.dartlang.org/docs/dart-up-and-running/contents/ch02.html">Dart Language Tour</a></span></li><li class="c0 c11"><span class="c18"><a class="c15" href="http://www.dartlang.org/docs/dart-up-and-running/contents/ch03.html">Dart Library Tour</a></span></li><li class="c0 c11"><span class="c18"><a class="c15" href="http://www.dartlang.org/docs/">Programmer&#39;s Guide</a></span></li></ol><p class="c2 c8"><span></span></p><h1 class="c2 c17"><a name="h.izpr9unnbboh"></a></h1><hr style="page-break-before:always;display:none;"><h1 class="c2 c17"><a name="h.j231q75dw9bi"></a></h1><h1 class="c2"><a name="h.gu4egoh1qqcf"></a><span>Step 0: Get the app, run it in Dart Editor, and practice debugging</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>This step sets the stage. You make sure you have the right software, can run the finished app, and know how to use Dart Editor&rsquo;s integrated debugger.</span></p><p class="c2 c8"><span></span></p><h2 class="c2"><a name="h.fp11eex6azbi"></a><span>Objectives</span></h2><ol class="c12" start="1"><li class="c0 c11"><span>Get the </span><span>latest version of Dart Editor</span></li><li class="c0 c11"><span>Download the source code for the sample app</span></li><li class="c0 c11"><span>Run the finished version of the app</span></li><li class="c0 c11"><span>Look at debugging information for the running app</span></li></ol><p class="c2 c8"><span></span></p><h2 class="c2"><a name="h.of31fpik16gt"></a><span>Concepts overview</span></h2><ol class="c33" start="1"><li class="c0 c11"><span class="c6">Dartium</span><span>&nbsp;(Chromium with a built-in Dart VM) and the Dart SDK are included in Dart Editor download.</span></li><li class="c0 c11"><span>You can run Dart web apps in Dartium or in </span><span class="c6">any modern browser</span><span>. (Dart Editor compiles the Dart code to JavaScript, using an SDK tool called dart2js.)</span></li></ol><p class="c2 c8"><span></span></p><h2 class="c2"><a name="h.l63dnbcn7kku"></a><span>Walkthrough</span></h2><h3 class="c2"><a name="h.p74ks3s27haa"></a><span>Download or update Dart Editor</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>If you </span><span class="c6">don&rsquo;t </span><span>have a copy of Dart Editor, get it:</span></p><ol class="c12" start="1"><li class="c0 c11"><span>Go to </span><span class="c18"><a class="c15" href="http://www.dartlang.org/tools/editor/">dartlang.org/editor/</a></span><span>.</span></li><li class="c0 c11"><span>Download the version for your OS.</span></li><li class="c0 c11"><span>Unzip the file. You&rsquo;re done!</span></li><li class="c0 c11"><span>Launch Dart Editor by double-clicking the </span><span class="c6">DartEditor</span><span>&nbsp;executable file.</span></li></ol><p class="c2 c25"><img height="93" src="images/image35.png" width="77"></p><p class="c0"><span class="c6">Note:</span><span>&nbsp;If you&rsquo;re on a Mac, you might see an &ldquo;unidentified developer&rdquo; error. Here&rsquo;s the solution: Instead of double-clicking the </span><span class="c6">DartEditor</span><span>&nbsp;executable file, right-click (or Ctl+click) it to bring up a context menu, and choose </span><span class="c6">Open</span><span>. Then, in the dialog that comes up, click </span><span class="c6">Open</span><span>. An alternative workaround is to change your security settings (see </span><span class="c18"><a class="c15" href="http://www.dartlang.org/tools/editor/troubleshoot.html">Troubleshooting Dart Editor</a></span><span>).</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>If you </span><span class="c6">do</span><span>&nbsp;already have a copy of Dart Editor, make sure you&rsquo;re on the latest build:</span></p><ol class="c12" start="1"><li class="c0 c11"><span>Launch Dart Editor.</span></li><li class="c0 c11"><span>Close </span><span class="c6">Preferences</span><span>&nbsp;if you&rsquo;ve opened it.</span></li><li class="c0 c11"><span>Open </span><span class="c6">About Dart Editor</span><span>.</span></li><li class="c0 c11"><span>If the button at the bottom right (</span><span class="c6">Check for Update </span><span>or </span><span class="c6">Download Update</span><span>)</span><span class="c6">&nbsp;</span><span>is enabled, click it, and download the update.</span></li><li class="c0 c11"><span>When the button says </span><span class="c6">Apply Update</span><span>, click it.</span></li></ol><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.d3pxkjuwrjf7"></a><span>Download the app&rsquo;s source code</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>You can either clone the git repo or download the ZIP file.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>To clone the repo from the command line:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">git clone </span><span class="c18 c1"><a class="c15" href="https://github.com/dart-lang/io-2013-dart-codelab">https://github.com/dart-lang/io-2013-dart-codelab</a></span></p><p class="c2 c8"><span></span></p><p class="c2"><span>To get the source as a ZIP file:</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Go to </span><span class="c18"><a class="c15" href="https://github.com/dart-lang/io-2013-dart-codelab">https://github.com/dart-lang/io-2013-dart-codela</a></span><span class="c18"><a class="c15" href="https://github.com/dart-lang/io-2013-dart-codelab">b</a></span></li><li class="c0 c11"><span>Click the </span><span class="c6">ZIP</span><span>&nbsp;</span><span>button.</span></li></ol><p class="c0"><img height="169" src="images/image27.png" width="468"></p><h3 class="c2"><a name="h.ygvsq0wvi55m"></a><span>Run the finished application</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Now that you&rsquo;ve downloaded the source code, try out the finished application.</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>If you haven&rsquo;t already done so, launch Dart Editor by double-clicking the </span><span class="c6">DartEditor</span><span>&nbsp;executable file.</span></li></ol><p class="c2 c25"><img height="93" src="images/image35.png" width="77"></p><p class="c0"><span>If you have trouble, see </span><span class="c18"><a class="c15" href="http://www.dartlang.org/tools/editor/troubleshoot.html">Troubleshooting Dart Editor</a></span><span>.<br></span></p><ol class="c12" start="2"><li class="c0 c11"><span>In Dart Editor, t</span><span>ype </span><span class="c6">Ctl+O</span><span>&nbsp;(Linux/Windows) or </span><span class="c6">Cmd+O</span><span>&nbsp;(Mac) </span><span>or choose </span><span class="c6">File &gt; </span><span class="c6">Open Existing Folder</span><span>.<br></span></li><li class="c0 c11"><span>Select the </span><span class="c6">io-2013-codelab-finished</span><span>&nbsp;directory in the folder where you extracted the source code, and click </span><span class="c6">Open</span><span>.</span><span>&nbsp;</span></li></ol><p class="c0 c8"><span></span></p><p class="c0"><span>Dart Editor </span><span>installs the app&rsquo;s dependenc</span><span>ies and starts building it. The progress bar is in the lower right corner of the window. Dart Editor keeps the dependencies and compiled version up-to-date. However, if you ever need or want to build the app manually, you can follow these steps:</span></p><ol class="c23" start="1"><li class="c7 c2"><span>In the Files view, right-click </span><span class="c6">pubspec.yaml</span><span>&nbsp;and choose </span><span class="c6">Pub Install</span><span>.</span></li><li class="c7 c2"><span>In the Tools menu, choose </span><span class="c6">Reanalyze Sources</span><span>.<br>(The editor might beat you to this, but it won&rsquo;t hurt to do it twice.)</span></li><li class="c7 c2"><span>In the Files view, right-click</span><span>&nbsp;</span><span class="c6">build.da</span><span class="c6">rt</span><span>&nbsp;and choose </span><span class="c6">Run</span><span>. <br>The output should look </span><span>something</span><span>&nbsp;like the following.</span></li></ol><p class="c0 c8"><span></span></p><p class="c3 c2"><span class="c1">Total time spent on web/index.html &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- 1159 ms</span></p><p class="c3 c2"><span class="c1">Total time &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- 1194 ms</span></p><p class="c2 c3"><span class="c1">Build finished!</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="4"><li class="c0 c11"><span>Run the app in Dartium:</span></li></ol><ol class="c23" start="1"><li class="c7 c2"><span>In the Files view, find the </span><span class="c6">web</span><span>&nbsp;directory and right-click its </span><span class="c6">index.html</span><span>&nbsp;file.</span></li><li class="c7 c2"><span>Choose </span><span class="c6">Run in Dartium</span><span>. The app initially looks like this:</span></li></ol><p class="c2 c25"><img height="342" src="images/image17.png" width="660"><span><br></span><span class="c6">Note</span><span>: If you don&rsquo;t see an Untitled document, try steps 3a-3c. Also check that the </span><span class="c6">web</span><span>&nbsp;directory contains an </span><span class="c6">out</span><span>&nbsp;directory. Try running </span><span class="c6">web/out/index.html</span><span>. If it still doesn&rsquo;t work, restart Dart Editor.</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="5"><li class="c0 c11"><span>Play with the app</span><span>:</span></li></ol><ol class="c23" start="1"><li class="c7 c2"><span>Click the + button to create an untitled document.</span></li><li class="c7 c2"><span>Rename the untitled document by editing the title in the right-hand pane.</span></li><li class="c7 c2"><span>Put some text in the document.</span></li><li class="c7 c2"><span>Use the + button to create more documents.</span></li><li class="c7 c2"><span>Use the </span><span class="c6">Filter documents</span><span>&nbsp;field to limit the documents shown to those that have a certain string in their title or contents.</span></li></ol><p class="c2 c25"><img height="320" src="images/image32.png" width="642"></p><ol class="c23" start="6"><li class="c7 c2"><span>Make the window narrower, and observe how the layout changes.</span></li></ol><p class="c2 c8"><span></span></p><ol class="c12" start="6"><li class="c0 c11"><span>Copy the app&rsquo;s URL from the tab that&rsquo;s running the app, then close that tab. Open another tab and navigate to the app&rsquo;s URL. Notice how all the documents you created remain, as long as you&rsquo;re using the same browser and profile.</span></li></ol><p class="c2 c8"><span></span></p><ol class="c12" start="7"><li class="c0 c11"><span>Now that you&rsquo;ve see the app running in Dartium, try running it in your default browser and in another browser:</span></li></ol><ol class="c23" start="1"><li class="c7 c2"><span>Quit the Dartium app, </span><span>either by closing its tab or by clicking the </span><span class="c6 c31">red square</span><span>&nbsp;in the Debugger pane.</span></li></ol><p class="c2 c25"><img height="80" src="images/image19.png" width="166"></p><ol class="c23" start="2"><li class="c7 c2"><span>To </span><span>run the app in your default browser (probably </span><span class="c18"><a class="c15" href="https://www.google.com/intl/en/chrome/browser/">Chrome</a></span><span>), right-click </span><span class="c6">web/index.html </span><span>and choose </span><span class="c6">Run as JavaScript</span><span>. </span></li><li class="c7 c2"><span>To run it in another browser:</span></li></ol><ol class="c21" start="1"><li class="c11 c2 c14"><span>From the </span><span class="c6">Run</span><span>&nbsp;menu, choose </span><span class="c6">Manage Launches</span><span>.</span></li><li class="c11 c2 c14"><span>Click the gray world button (to the left of the big </span><span class="c31 c6">red X</span><span>) to create a new </span><span>dart2js</span><span>&nbsp;launch.</span><span><br></span><img height="206" src="images/image13.png" width="397"></li><li class="c11 c2 c14"><span>Enter information for the launch. For example:<br>&#9656; Change &ldquo;New launch&rdquo; to </span><span class="c6">Writer in Firefox</span><span class="c6"><br></span><span>&#9656; For the HTML file, enter </span><span class="c6">/io-2013-codelab-finished/web/index.html</span></li></ol><p class="c2 c14"><span>&#9656; </span><span>Uncheck &ldquo;Use system default browser&rdquo;, and select the browser you need. For example, you might set the Browser field to </span><span class="c6">/Applications/Firefox.app</span></p><p class="c2 c14"><img height="437" src="images/image33.png" width="640"></p><ol class="c21" start="4"><li class="c11 c2 c14"><span>Click </span><span class="c6">Run</span><span>. Your app should look the same as it did in Dartium and your default browser:<br></span><img height="261" src="images/image23.png" width="495"><span><br>From now on, you can use the little arrow next to the Run button </span><img height="16" src="images/image04.png" width="16"><span>&nbsp;to choose the launch you want to use.</span></li></ol><p class="c2 c14"><img height="175" src="images/image26.png" width="593"></p><p class="c2 c8 c14"><span></span></p><h3 class="c2"><a name="h.yoqjazd1uxez"></a><span>Debug the running app</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>The easiest way to debug a Dart app is with Dart Editor and Dartium. Try this:</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Open </span><span class="c6">web/app.dart</span><span>&nbsp;in Dart Editor. (Double-click it in the Files view.)</span></li><li class="c0 c11"><span>In </span><span>app.dart</span><span>, find the </span><span>createDocument</span><span>() function (line 34).<br></span><span class="c13">Trick: </span><span class="c13">Right-click </span><span class="c13">in the Editor pane and choose </span><span class="c13 c6">Outline File</span><span class="c13">. Then click </span><span class="c6 c13">createDocument</span><span class="c13">.</span></li></ol><p class="c0"><img height="271" src="images/image38.png" width="389"><span>&nbsp; &nbsp; </span><img height="218" src="images/image22.png" width="368"></p><ol class="c12" start="3"><li class="c0 c11"><span>Set a breakpoint in the function by double-clicking the gray bar </span><span>to the left of &ldquo;void createDocument() ...&rdquo;</span><span>.</span></li></ol><p class="c0"><img height="123" src="images/image02.png" width="351"></p><ol class="c12" start="4"><li class="c0 c11"><span>Stop</span><span>&nbsp;the app if it&rsquo;s already running. You can close the browser window the app is running in or click the </span><span class="c31 c6">red</span><span>&nbsp;stop button in Dart Editor.</span></li></ol><p class="c0"><img height="66" src="images/image11.png" width="280"></p><ol class="c12" start="5"><li class="c0 c11"><span>Run the app in </span><span>Dartium</span><span>. If you are using the launches menu, choose the launch with the mini </span><span class="c6 c35">blue</span><span>&nbsp;Chromium icon.</span><img height="140" src="images/image37.png" width="441"></li><li class="c0 c11"><span>Get the app to hit the breakpoint.</span></li></ol><ol class="c23" start="1"><li class="c7 c2"><span>If you do not have any documents saved, the app hits the breakpoint on startup because it needs to create a new document to begin with.</span></li><li class="c2 c7"><span>If the app starts up without hitting the breakpoint, c</span><span>reate a new</span><span>&nbsp;</span><span>document by clicking the + button.<br>The app hits the breakpoint.</span></li></ol><ol class="c12" start="7"><li class="c0 c11"><span>In the Debugger pane, open </span><span class="c6">top-level </span><span>and then click the </span><span class="c6">documents</span><span>&nbsp;variable (</span><span class="c13">not the </span><span class="c13 c6">document</span><span class="c13">&nbsp;variable)</span><span>. It&rsquo;</span><span>s an array of Document objects.</span><span>&nbsp;In the image below, the array contains three Document objects.</span></li></ol><p class="c0"><img height="310" src="images/image36.png" width="273"></p><ol class="c12" start="8"><li class="c0 c11"><span>Use F5 or click the &ldquo;Step Into&rdquo; icon.</span></li></ol><p class="c0"><img height="66" src="images/image05.png" width="280"><span><br></span><span>Whoops, now you&rsquo;re in library code!</span></p><ol class="c12" start="9"><li class="c0 c11"><span>Use F7 or the</span><span>&nbsp;&ldquo;Step Return&rdquo; icon</span><span>&nbsp;to get back into app.dart code.</span></li></ol><p class="c0"><img height="66" src="images/image24.png" width="280"></p><ol class="c12" start="10"><li class="c0 c11"><span>In the Debugger pane, look at the </span><span class="c6">doc</span><span>&nbsp;variable, which is an instance of Document.</span></li><li class="c0 c11"><span>Use F6 or &ldquo;Step Over&rdquo; to get to the next line of code.</span></li></ol><p class="c0"><img height="66" src="images/image08.png" width="280"></p><ol class="c12" start="12"><li class="c0 c11"><span>Look at the top-level documents variable again. The array contains one more item than it did before.</span><img height="315" src="images/image28.png" width="277"></li><li class="c0 c11"><span>Continue </span><span>playing with the debugger</span><span>.</span></li></ol><p class="c2"><span><br></span><span class="c6">Note: </span><span>Don&rsquo;t open Developer Tools in Dartium while you&rsquo;re debugging. Due to a bug, this crashes the debugger.</span></p><h1 class="c2 c17"><a name="h.m0iq4b5hbsv5"></a></h1><hr style="page-break-before:always;display:none;"><h1 class="c2 c17"><a name="h.iwp6w76ozn91"></a></h1><h1 class="c2"><a name="h.mkmyy8842ats"></a><span>Overview: A visual summary of what you&rsquo;ll be doing</span></h1><p class="c2 c8"><span></span></p><a href="#" name="52d6a0f8e4829fea7de3b1d33f961a48fdaa7f9a"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr><td class="c26"><p class="c4 c10 c2"><span>Begin with skeletal app</span></p></td><td class="c29"><p class="c4 c2 c16"><img height="365" src="images/image31.png" width="344"><span>&nbsp;</span></p></td></tr><tr><td class="c26"><p class="c4 c10 c2"><span>Add document word count to the footer</span></p></td><td class="c29"><p class="c4 c2 c16"><img height="361" src="images/image29.png" width="341"></p></td></tr><tr><td class="c26"><p class="c4 c10 c2"><span>Create side bar</span></p></td><td class="c29"><p class="c4 c2 c16"><img height="365" src="images/image14.png" width="344"></p></td></tr><tr><td class="c26"><p class="c4 c10 c2"><span>Add the ability to create, select, and </span><span>delete</span><span>&nbsp;documents</span></p></td><td class="c29"><p class="c4 c2 c16"><img height="326" src="images/image16.png" width="359"></p></td></tr><tr><td class="c26"><p class="c4 c2 c10"><span>Add search filter</span></p></td><td class="c29"><p class="c4 c2 c16"><img height="317" src="images/image09.png" width="359"></p></td></tr><tr class="c22"><td class="c26"><p class="c4 c10 c2"><span>Add local storage (provides document persistence between invocations)</span></p></td><td class="c29"><p class="c4 c2 c16"><img height="314" src="images/image20.png" width="355"></p></td></tr><tr class="c22"><td class="c26"><p class="c4 c10 c2"><span>Optimize layout for mobile devices</span></p></td><td class="c29"><p class="c4 c2 c16"><span>Index </span><img height="197" src="images/image00.png" width="253"><span>&nbsp; Contents &nbsp; </span><img height="198" src="images/image34.png" width="254"></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h1 class="c2 c17"><a name="h.cpkpyn1nw7g"></a></h1><h1 class="c2"><a name="h.ymc534ugdysm"></a><span>Step 1: Begin with a skeletal app, add the word count to the footer using data binding</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>Now that you have Dart Editor set up and understand how the application works, let&rsquo;s rebuild the app step-by-step, starting with a skeletal version. The code you downloaded from github contains a directory for each completed step of the code lab. So if necessary, you can begin each step with a correct version of the app. In the walkthrough portion of this step, you begin with the code in </span><span class="c6">io-2013-codelab-step1</span><span>.</span></p><h2 class="c2"><a name="h.uvnvnl2dm2ai"></a><span>What you will learn</span></h2><p class="c2 c8"><span></span></p><p class="c2"><span>You can display the value of a Dart variable on your web page directly within the HTML code. When the value of the variable changes within the Dart program, the UI automatically updates.</span><span>&nbsp;This capability, called one-way data binding, is implemented by the Web UI public package. The Writer application uses one-way data binding to display the current document&rsquo;s word count in the footer of the page. </span></p><h2 class="c2"><a name="h.6jc7oqfnek9i"></a><span>Concepts overview</span></h2><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Import public packages.</span></li><li class="c0 c11"><span>Libraries.</span></li><li class="c0 c11"><span>One-way data binding with Web UI.</span></li><li class="c0 c11"><span>Getters.</span></li></ol><h3 class="c2"><a name="h.lpjuflgo3igm"></a><span>Import public packages</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>A </span><span>package</span><span>&nbsp;is a distributable bundle of code, often containing one or more libraries. The pub package manager helps you install and manage 3rd party packages. Dart&rsquo;s public repository </span><span class="c18"><a class="c15" href="http://pub.dartlang.org">pub.dartlang.org</a></span><span>&nbsp;hosts many useful packages, including the Web UI package, which you need later for this step. The code below is a </span><span class="c13">package import</span><span>, which </span><span>includes the Web UI package in a Dart file.</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">import &#39;package:web_ui/web_ui.dart&#39;; &nbsp;// import the Web UI package</span></p><p class="c2 c8"><span></span></p><p class="c2"><span class="c24 c6">Libraries</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Dart code can be organized into </span><span class="c13">libraries</span><span>. A library is a namespace that can contain top-level fields, top-level functions, classes, and more. A library can import other libraries, and be imported into other libraries.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The Dart core libraries start with &quot;dart:&quot;, such as dart:core, dart:collection, and dart:async. These libraries come from the Dart SDK. For example, to import the core async library, simply add this to the top of your library:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">import &#39;dart:async&#39;; &nbsp;// an </span><span class="c1">important</span><span class="c1">&nbsp;Dart core library</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>A library can be split across multiple files, also known as </span><span class="c13">parts</span><span>. We don&#39;t show an example of parts in the code lab.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span class="c24 c6">One-way data binding with Web UI</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The Web UI package implements one-way data binding, which provides dynamic and automatic synchronization between an HTML element and an observable Dart variable. The </span><span>@observable</span><span>&nbsp;meta-data annotation marks a variable to be observed. The Web UI compiler, </span><span>dwc</span><span>, generates extra code that notes changes to an observable variable and keeps the UI in sync with those changes. Here is an observable string:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">@observable String aStringOfNote = &#39;Hello, World!&#39;;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The value of an observable variable can be embedded in an HTML page, by including the variable name between </span><span>double curly braces, {{</span><span class="c13">name_of_observable</span><span class="c13">_var</span><span>}},</span><span>&nbsp;within normal HTML code, </span><span>as shown:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">&lt;p&gt; {{aStringOfNote}} &lt;/p&gt;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Later, if the value of the variable changes in the Dart code, the web page automatically updates to reflect the new value of the variable. For example, after the following line of Dart code runs, the paragraph element changes from </span><span>&ldquo;Hello, World!&rdquo;</span><span>&nbsp;to </span><span>&ldquo;Goodbye, cruel world!&rdquo;</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">aStringOfNote = &#39;Hello, Universe!&#39;;</span></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.2xeueasygjb"></a><span>Getters</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Dart allows you to create getters and setters that look like fields when used. </span><span>This means your design can start with simple fields, and evolve over time to use getters and setters. No more defensive and preemptive encapsulation!</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Here is an </span><span>example</span><span>. Consider a simple </span><span>Car</span><span>&nbsp;class with a single field called </span><span>isRunning</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">class Car {</span></p><p class="c0"><span class="c1">&nbsp; bool isRunning;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c8"><span class="c1"></span></p><p class="c0"><span class="c1">main() {</span></p><p class="c0"><span class="c1">&nbsp; var car = new Car();</span></p><p class="c0"><span class="c1">&nbsp; print(car.isRunning);</span></p><p class="c0"><span class="c1">}</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Imagine that you later add an </span><span>Engine</span><span>&nbsp;field to </span><span>Car</span><span>. </span><span>Engine</span><span>&nbsp;knows if it&#39;s running, thereby making </span><span>Car</span><span>&#39;s </span><span>isRunning</span><span>&nbsp;field obsolete. Do you break existing users? No way! Use a getter method!</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">class Engine {</span></p><p class="c0"><span class="c1">&nbsp; bool isRunning;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c8"><span class="c1"></span></p><p class="c0"><span class="c1">class Car {</span></p><p class="c0"><span class="c1">&nbsp; Engine engine;</span></p><p class="c0 c8"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; bool get isRunning =&gt; engine.isRunning;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c8"><span class="c1"></span></p><p class="c0"><span class="c1">main() {</span></p><p class="c0"><span class="c1">&nbsp; var car = new Car();</span></p><p class="c0"><span class="c1">&nbsp; print(car.isRunning);</span></p><p class="c0"><span class="c1">}</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Notice how the usage of the </span><span>car.isRunning</span><span>&nbsp;is the same with both the getter and the field.</span><span>&nbsp;The users of the </span><span>Car</span><span>&nbsp;class did not have to update their code when you changed the implementation of </span><span>Car</span><span>.</span></p><h2 class="c2"><a name="h.50b5692q1fjp"></a><span>Walkthrough</span></h2><h3 class="c2"><a name="h.sv7ivpmaxg6a"></a><span>Open the code for step </span><span>1</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Close the </span><span class="c6">io-2013-codelab-finished</span><span>&nbsp;directory: right-click on the folder in the Files view of Dart Editor and select </span><span class="c6">Close Folder </span><span>from the menu.</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="342" src="images/image12.png" width="448"></p><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">io-2013-codelab-step1</span><span>&nbsp;with </span><span class="c6">File &gt; Open Existing Folder</span><span>&nbsp;as you did with the finished directory in the previous step.</span></p><p class="c0 c8"><span></span></p><p class="c2"><span>Dart Editor </span><span>installs</span><span class="c13">&nbsp;</span><span>the app&rsquo;s dependencies and builds it.</span></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.wlekvj90m4yq"></a><span>Run the app</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Right click </span><span class="c6">web/index.html</span><span>&nbsp;and choose </span><span class="c6">Run in Dartium...</span><span>. The app should initially look like this:</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="379" src="images/image03.png" width="428"></p><h3 class="c2"><a name="h.q7zj6hd0zod0"></a><span>Import the Web UI package</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>The </span><span class="c6">lib/document.dart</span><span>&nbsp;file contains the code that implements a plain text document. The Document keeps track of its creation time, has a title, and text content. In this step, you add a getter to the Document class that calculates the number of words in the document.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Double click </span><span class="c6">lib/document.dart</span><span>&nbsp;to open the file.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Near the top of the file, notice this comment. </span></p><p class="c0 c4"><span class="c1">&hellip;</span></p><p class="c0 c4"><span class="c1">/// STEP 1: Import the Web UI package</span></p><p class="c0 c4"><span class="c1">&hellip;</span></p><p class="c0 c4 c8"><span></span></p><p class="c2"><span>Comments of this style appear throughout the code, clearly marking what to do for each numbered step. The </span><span class="c6">lib/document.dart</span><span>&nbsp;file has three comments for step one.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Beneath</span><span>&nbsp;the comment</span><span>, type in the import directive for including the Web UI package. In the gray code boxes throughout this code lab, the code you need to add is </span><span class="c6 c30">bold</span><span>. Code you need to delete is</span><span>&nbsp;</span><span class="c30 c5 c39">struck through</span><span>.</span></p><p class="c2 c8"><span></span></p><a href="#" name="1eb03ef741de58bf36f691312367c0d266536461"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c2 c4"><span class="c1">// lib/document.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c2"><span class="c1">/// STEP 1: Import the Web UI package.</span></p><p class="c2"><span class="c6 c1">import &#39;package:web_ui/web_ui.dart&#39;;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.84pihwlpka7h"></a><span>Mark the Document class with @observable</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Find the next </span><span>STEP 1</span><span>&nbsp;comment; it appears a few lines below the import directive you just </span><span>e</span><span>n</span><span>tered</span><span>.</span></p><p class="c0 c4"><span class="c1">&hellip;</span></p><p class="c0"><span class="c1">/// STEP 1: Mark the class with @observable.</span></p><p class="c0 c4"><span class="c1">&hellip;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Mark</span><span>&nbsp;the Document class with the </span><span>@observable</span><span>&nbsp;meta-data annotation. This makes all fields of an instance of the Document class observable.</span></p><p class="c2 c8"><span></span></p><a href="#" name="5c00fe5847c5c44c6a1bc33519c44743fce819af"></a><a href="#" name="2"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// lib/document.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c2"><span class="c1">/// STEP 1: Mark the class with @observable.</span></p><p class="c2"><span class="c6 c1">@</span><span class="c6 c1">observable</span></p><p class="c2"><span class="c1">class Document {</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.gbd8omocl705"></a><span>Calculate the word count for the current document</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>To find the final task for step 1 in the </span><span class="c6 c30">lib/document.dart</span><span>&nbsp;file,</span><span>&nbsp;s</span><span>earch for &ldquo;STEP 1&rdquo; and locate the comment for the wordCount method in the code. </span></p><p class="c0 c4"><span class="c1">&hellip;</span></p><p class="c0"><span class="c1">&nbsp; /// STEP 1: Add </span><span class="c1">wordCount</span><span class="c1">&nbsp;method.</span></p><p class="c0 c4"><span class="c1">&hellip;</span></p><p class="c0 c4 c8"><span></span></p><p class="c2"><span>To search in Dart Editor, go to the </span><span class="c6">Edit</span><span>&nbsp;menu and choose </span><span class="c6">Find/Replace...</span><span>. Then type &ldquo;STEP 1&rdquo; into the text field and click </span><span class="c6">Find</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Under the comment, a</span><span>dd</span><span>&nbsp;the code for a new getter called wordCount. The getter uses the RegExp class, which is provided in the dart:core library, to calculate how many words are in the document. The return value of this getter is embedded in the </span><span>HTM</span><span>L in the next step.</span></p><p class="c2 c8"><span></span></p><a href="#" name="aa4e308f40e17bca49305834a398c0d654ff60c6"></a><a href="#" name="3"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// lib/document.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; /// STEP 1: Add wordCount method.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; /**</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp;* &nbsp;Number of words in the document.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp;*</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp;* &nbsp;A &quot;word&quot; is a string of characters separated by a space or a newline.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; String get wordCount {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; int count = new RegExp(r&quot;(\w|\&#39;)+&quot;).allMatches(_content).length;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; if (count &gt;= 1) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; return &#39;$count words&#39;;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; } else if (count == 1) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; return &#39;$count word&#39;;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; }</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; return &#39;No words - Yo, Yo write something...&#39;;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><h3 class="c2 c38"><a name="h.ionqzezeva8k"></a></h3><p class="c2"><span>Save the file using </span><span class="c6">File &gt; Save</span><span>. You have completed all of the step 1 tasks in the </span><span class="c6">lib/document.dart </span><span>file.</span></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.tvdyvkmtr48d"></a><span>Embed the word count in the footer of the web page.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>The HTML page that hosts the Writer app is </span><span class="c6">web/index.html</span><span>. Let&rsquo;s add the word count to the footer of the page.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Double click</span><span>&nbsp;</span><span class="c6">web/index.html </span><span>to open it.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Search for &ldquo;STEP 1&rdquo; and locate the code for the footer.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Add the code to d</span><span>isplay the word count in the footer of the document</span><span>, using the double curly bracket syntax.</span></p><p class="c2 c8"><span></span></p><a href="#" name="f6fe9061c4c563e8371a0634aedb78d26f02c3d1"></a><a href="#" name="4"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;footer&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 1: Show the current word count. --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{activeDocument.wordCount}}</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span class="c1"></span></p><p class="c2"><span>Save your changes with </span><span class="c6">File &gt; Save</span><span>. You have completed all of the step 1 tasks.</span></p><h3 class="c2"><a name="h.lz56mhvll7k0"></a><span>Run the revised version of the app.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Run the app again</span><span>, and type in the document. As you type, the word count updates at the bottom of the page:</span></p><p class="c2"><img height="390" src="images/image21.png" width="539"></p><p class="c2 c8"><span></span></p><p class="c2"><span>Congratulations! You&rsquo;ve completed the first step.</span></p><h1 class="c2 c17"><a name="h.nxg0ahyrlxhi"></a></h1><hr style="page-break-before:always;display:none;"><h1 class="c2 c17"><a name="h.bl9vt9tueqdf"></a></h1><h1 class="c2"><a name="h.bdr5squ6r500"></a><span>Step 2: Create a sidebar to list the documents</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>The family of Web Component specifications, such as custom elements and HTML imports, give the web developer real encapsulation of the structure, style, and behaviors of elements in the DOM. With help from the Web UI package, you can make your own tags!</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>In this step, using the </span><span>&lt;element&gt; tag,</span><span>&nbsp;you create a custom element to implement the behavior and view of a sidebar that lists the documents. Then, you use the new custom element to create a sidebar in the Writer app.</span></p><h2 class="c2"><a name="h.k74i547r3lz2"></a><span>What you will learn</span></h2><ol class="c12" start="1"><li class="c0 c11"><span>Define custom elements.</span></li><li class="c0 c11"><span>Import HTML into HTML.</span></li><li class="c0 c11"><span>Use custom elements.</span></li><li class="c0 c11"><span>One-line functions.</span></li></ol><h2 class="c2"><a name="h.q4bjn1j36hoo"></a><span>Concepts overview</span></h2><h3 class="c2"><a name="h.mvtayj1q6so5"></a><span>Define c</span><span>ustom elements</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>A custom </span><span>element </span><span>extends the lexicon of HTML</span><span>.</span><span>&nbsp;A custom element definition encapsulates the structure (the HTML), styles (CSS), and behavior (Dart or JavaScript code) of a new kind of element. For example, you can extend </span><span>&lt;button&gt;</span><span>&nbsp;to create </span><span>a</span><span>&nbsp;</span><span>&lt;fancy-button&gt;</span><span>&nbsp;tag, with new custom behaviors and appearance.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>By convention, custom element names begin with </span><span>x-. F</span><span>or example </span><span>&lt;x-flower&gt;</span><span>. Custom element names </span><span class="c13">must</span><span>&nbsp;have a hyphen (-) in their name, such as &lt;fancy-button&gt;. Following the </span><span>x-</span><span>&nbsp;naming convention ensures that your custom element &nbsp;names always have a hyphen.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The new </span><span>&lt;element&gt;</span><span>&nbsp;tag allows you to declare a new element (using HTML to declare HTML, I like it!) Here is an example:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">&lt;element name=&quot;x-comment&quot; extends=&quot;div&quot; constructor=&quot;CommentComponent&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;template&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;name&quot;&gt;{{name}}&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;comment&quot;&gt;&lt;content&gt;&lt;/content&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;/template&gt;</span></p><p class="c0"><span class="c1">&nbsp;</span><span class="c1">&nbsp;&lt;script type=&quot;application/dart&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; import &#39;package:web_ui/web_ui.dart&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; class CommentComponent extends WebComponent {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; String name;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; String comment;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &lt;/script&gt;</span><sup><a href="#cmnt1" name="cmnt_ref1">[a]</a></sup></p><p class="c0"><span class="c1">&lt;/element&gt;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The element tag defines a new kind of HTML element. To create an instance of a custom element use the element name as you would any other HTML tag. To create an instance of the element defined above, write &lt;x-comment&gt;. A custom element instance </span><span class="c13">must</span><span>&nbsp;have a closing tag &lt;/x-comment&gt;.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Within the template definition above, notice the &lt;content&gt; tag. When an &lt;x-comment&gt; element is instantiated, you can use other HTML elements between </span><span>&lt;x-comment&gt; and &lt;/x-comment&gt;, a paragraph, a span, a list, for example. Those elements replace the &lt;content&gt; tag for that instantiation. </span><span>Using attributes, you can filter for specific elements to replace the &lt;content&gt; tag.</span></p><h3 class="c2"><a name="h.cu2zzp8exzxx"></a><span>Import HTML into HTML</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>To use a custom element, you often </span><span class="c13">import</span><span>&nbsp;the HTML that contains the </span><span>&lt;element&gt;</span><span>&nbsp;tag. Luckily, HTML has a method for including resources: the </span><span>&lt;link&gt;</span><span>&nbsp;tag. Here is an example:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">&lt;link rel=&quot;import&quot; href=&quot;comment_component.html&quot;&gt;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>T</span><span>he </span><span>&lt;link&gt;</span><span>&nbsp;tag must appear in the </span><span>&lt;head&gt;</span><span>&nbsp;of the document.</span></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.9ahc7aijhm6g"></a><span>Use custom elements</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Once you have imported the custom element, you can use it in your document. Here is an example:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">&lt;ul&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;li&gt;&lt;x-comment name=&quot;Bob&quot;&gt;I totally agree!&lt;/x-comment&gt;&lt;/li&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;li&gt;&lt;x-comment name=&quot;Alice&quot;&gt;I totally disagree!&lt;/x-comment&gt;&lt;/li&gt;</span></p><p class="c0"><span class="c1">&lt;/ul&gt;</span></p><h3 class="c2"><a name="h.w7is3otkoy1o"></a><span>One-line functions</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Dart makes it easy and terse to write one-line functions with the &quot;fat arrow&quot; syntax. Here is an example:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">int nextNumber() =&gt; i++;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The above code is syntactic sugar for:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">int nextNumber() {</span></p><p class="c0"><span class="c1">&nbsp; return i++;</span></p><p class="c0"><span class="c1">}</span></p><h2 class="c2"><a name="h.lx7xe3hizh5u"></a><span>Walkthrough</span></h2><h3 class="c2"><a name="h.nnxh8c8g9rvf"></a><span>The custom element&#39;s file</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>First, create a new file for the custom element inside of the </span><span class="c6">web/</span><span>&nbsp;directory.</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Right-click on the </span><span class="c6">web</span><span>&nbsp;directory and select &quot;</span><span class="c6">New File</span><span>&quot;.</span></li><li class="c0 c11"><span>Name this file &quot;document_item.html&quot;. Dart Editor provides some boilerplate code. Delete it.</span></li><li class="c0 c11"><span>Open </span><span class="c6">__for_later/document_item.html</span><span>, copy its contents, and paste it into </span><span class="c6">web/document_item.html</span><span>.</span></li></ol><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.kvlk5fbt87kg"></a><span>Declare the custom element</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Ensure you are working in </span><span class="c6">web/document_item.html</span><span>, and add the following code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="b009468215a0c56688786bc71c4766d48ed7b514"></a><a href="#" name="5"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/document_item.html</span></p><p class="c4 c2"><span class="c1">&lt;html&gt;&lt;body&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &lt;!-- STEP 2: Define a custom element. &rarr;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &lt;element name=&quot;x-document-item&quot; constructor=&quot;DocumentItem&quot;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; extends=&quot;div&quot; </span><span class="c6 c1">apply-author-styles</span><span class="c6 c1">&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;!-- STEP 2: Define the DOM template for our custom element --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;template&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;/template&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;!-- STEP 2: Add the script tag that defines this component&#39;s behaviour. --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;script type=&quot;application/dart&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;/script&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &lt;/element&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&lt;/body&gt;&lt;/html&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span class="c1"></span></p><p class="c2"><span>A few notes about the code above:</span></p><p class="c2 c8"><span></span></p><ol class="c33" start="1"><li class="c0 c11"><span>The name of the element is </span><span>x</span><span>-document-item</span><span>.</span></li><li class="c0 c11"><span>The custom element extends </span><span>&lt;div&gt;</span><span>. That is, </span><span>x-document-item</span><span>&nbsp;is a special kind of div.</span></li><li class="c0 c11"><span>Some behavior of the </span><span>x-document-item</span><span>&nbsp;is implemented by a </span><span>Dart class named </span><span>DocumentItem</span><span>. You will create and include this class below.</span></li><li class="c0 c11"><span>The </span><span>apply-author-styles</span><span>&nbsp;attribute indicates that styles from the larger HTML document apply to the contents of the custom component.</span></li></ol><p class="c2 c8"><span></span></p><p class="c2"><span>Notice the </span><span>&lt;template&gt;</span><span>&nbsp;tag inside of </span><span>&lt;element&gt;</span><span>. A custom element can define its own structure with the </span><span>&lt;template&gt;</span><span>&nbsp;tag. Fill in this template now.</span></p><h3 class="c2"><a name="h.l68l6dl0jzre"></a><span>The template</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Add the code for the template as shown. Y</span><span>ou need to also add the comments</span><span>&nbsp;for STEP 3 just as we have them in the code. You need the comments to orient yourself later when you implement Step 3.</span></p><p class="c2 c8"><span></span></p><a href="#" name="7042cc209fcf1d47ccfc4265721fd964e76e6f4f"></a><a href="#" name="6"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/document_item.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;!-- STEP 2: Define the DOM template for our custom element --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;template&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; </span><span class="c6 c1">&lt;!-- STEP 3: On click, select the document. --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;item {{isActiveClass}}&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;title&quot;&gt;{{title}}&lt;/div&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;modified&quot;&gt;{{modified}}&lt;/div&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: Add delete button. --&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;/template&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>You can use one-way data binding in a template. Each time a custom element is instantiated, an instance of the Dart class is created and associated with the custom element. Data bindings in the template are bound to fields in that Dart instance. For example, </span><span>{{title}}</span><span>&nbsp;binds to a field from the instance of </span><span>DocumentItem that is created when an element of this type is created. </span><span>It&#39;s a good idea to move all logic into the Dart class, and just use fields and getters for the HTML.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Speaking of the class, let&#39;s add that now!</span></p><p class="c2 c8"><span></span></p><p class="c2"><span class="c24 c6">The script</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Use a </span><span>&lt;script&gt;</span><span>&nbsp;tag to declare the Dart class that goes with the custom element. The Dart class contains any state and behavior applicable to the view.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Ensure you are still editing </span><span class="c6">web/document_item.html</span><span>, and add the following code inside the &lt;script&gt; and &lt;/script&gt; tags:</span></p><p class="c2 c8"><span></span></p><a href="#" name="38b92f10e28849103dac69976e506327495960f7"></a><a href="#" name="7"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/document_item.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;!-- STEP 2: Add the script tag that defines this component&#39;s behaviour. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;script type=&quot;application/dart&quot;&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; import &#39;package:web_ui/web_ui.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; import &#39;package:writer/document.dart&#39;;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; import &#39;app.dart&#39; as app;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; /**</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp;* This Dart class defines the behavior and</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp;* state of the custom element.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp;*/</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; class DocumentItem extends WebComponent {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; Document </span><span class="c6 c1">doc</span><span class="c6 c1">;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; String get title =&gt; doc.title.isEmpty ? &#39;Untitled&#39; : doc.title;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; String get modified =&gt; </span><span class="c6 c1">dateFormat</span><span class="c6 c1">.format(doc.modified);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; String get isActiveClass =&gt; doc == app.activeDocument ? &#39;active</span><span class="c6 c1">&#39; :</span><span class="c6 c1">&nbsp;&#39;&#39;;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; }</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;/script&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span class="c6">Note</span><span>: Dart Editor doesn&#39;t yet fully support Dart code embedded inside of </span><span>&lt;script&gt;</span><span>&nbsp;tags. For example, you can&#39;t use code completion inside of a </span><span>&lt;script&gt;</span><span>&nbsp;tag yet. We anticipate that the editor will have this functionality in time for 1.0.</span></p><p class="c2 c8"><span class="c1"></span></p><p class="c2"><span>A few notes about the code above:</span></p><ol class="c33" start="1"><li class="c0 c11"><span>The </span><span>DocumentItem</span><span>&nbsp;class acts as a </span><span class="c13">View Model</span><span>, encapsulating any state used by the view, and linking model classes like Document to the view. We use getters for </span><span>title</span><span>, modified, and </span><span>isActiveClass</span><span>&nbsp;</span><span>because</span><span>&nbsp;calling a getter is shorter than calling a method.</span></li><li class="c0 c11"><span>A </span><span>DocumentItem</span><span>&nbsp;uses a </span><span>Document</span><span>&nbsp;object, called </span><span>doc</span><span>, for its data model. The </span><span>doc</span><span>&nbsp;field gets initialized when the custom element gets instantiated. You&rsquo;ll see this later when you add the sidebar in the HTML code.</span></li><li class="c0 c11"><span>The </span><span>Document</span><span>&nbsp;class defines a top-level object, called </span><span>dateFormat</span><span>, used to format the modified date. (Look at the bottom of </span><span class="c6">lib/document.dart</span><span>&nbsp;</span><span>for the code that creates </span><span>dateFormat</span><span>.) The </span><span>DateFormat</span><span>&nbsp;class is provided by the </span><span>intl</span><span>&nbsp;package.</span></li></ol><p class="c2 c8"><span></span></p><p class="c2"><span>&nbsp;Save your changes to </span><span class="c6">web/document_item.html</span><span>.</span></p><h3 class="c2"><a name="h.pg2b8doo4y91"></a><span>Import the custom element into the main HTML</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>To create instances of &lt;x-document-item&gt;, the main application&#39;s HTML needs to import the code that defines the custom &lt;x-document-item&gt; tag. Luckily, HTML already has a mechanism to link to other resources: the &lt;link&gt; tag!</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/index.html</span><span>&nbsp;and add the following code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="090acfcf20bc970a0ebbc86e3935b6445f53431d"></a><a href="#" name="8"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css.css&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;!-- STEP 2: Import the document item component. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; </span><span class="c6 c1">&lt;link rel=&quot;import&quot; href=&quot;document_item.html&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &lt;/head&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.eu70myeqpqpx"></a><span>Add the sidebar</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>With the custom element implemented, and imported, time to use &lt;x-document-item&gt;!</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Make sure you are still editing </span><span class="c6">web/index.html</span><span>. And</span><span>&nbsp;yes, </span><span>you need to write all those comments</span><span>&nbsp;just as we have them in the code. You will add more functionality in the following steps, so you need the comments to ensure you can orient yourself later.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Add the following code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="d70e43e44b21a0f2da93cec4f6a9b1f60f8acb67"></a><a href="#" name="9"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &lt;body&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;!-- STEP 2: Add a sidebar to the application. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; </span><span class="c6 c1">&lt;section id=&quot;sidebar&quot; class=&quot;{{sidebarClass}}&quot;&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;toolbar&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: Add a button to create a new document. --&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;input-wrap&quot;&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 4: Add a input box to filter documents. --&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;!-- Documents list --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;items&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: Iterate over list of documents. --&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 2: Add the active document to the sidebar. --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6 c1">&lt;x-document-item doc=&quot;{{activeDocument}}&quot;&gt;&lt;/x-document-item&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;!-- Also check out dartlang.org! --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;footer&quot;&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;a href=&quot;https://github.com/dart-lang/io-2013-dart-codelab&quot;&gt;View Source&lt;/a&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;/section&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;!-- Editing window --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;section id=&quot;main&quot; class=&quot;{{mainClass}}&quot;&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Take a look at </span><span>&lt;x-document-item doc=&quot;{{activeDocument}}&quot;&gt;</span><span>. The active document is bound into the </span><span>x-document-item</span><span>&nbsp;tag via the </span><span>doc</span><span>&nbsp;attribute. </span><span>The </span><span>activeDocument</span><span>&nbsp;object is a top-level variable from app.dart.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Save your changes in </span><span class="c6">web/index.html</span><span>&nbsp;and in </span><span class="c6">web/document_item.html</span><span>, if you haven&rsquo;t already done so.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Depending on the order in which you saved the files, you might see warnings or errors in Dart Editor complaining about unknown custom elements. Try running </span><span class="c6">Tools &gt; Reanalyze Sources</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Run </span><span>the app. On the left side of the app is a sidebar that contains a document.</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="449" src="images/image25.png" width="558"></p><p class="c2 c8"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c2 c8"><span></span></p><h1 class="c2"><a name="h.yjqv0zg28trz"></a><span>Step 3: Add the ability to create, delete, and select documents in the list</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>In this step, you&rsquo;ll implement support for creating, deleting, and selecting documents. Your code will use an observable list to keep track of which documents exist.</span></p><h2 class="c2"><a name="h.plhwv16qfiu3"></a><span>What you will learn</span></h2><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Using Web UI&rsquo;s</span><span>&nbsp;toObservable()</span><span>&nbsp;function to make a list observable.</span></li><li class="c0 c11"><span>Using </span><span>&lt;template iterate...&gt;</span><span>&nbsp;to </span><span>create an element </span><span>for each item in a list.</span></li></ol><h2 class="c2"><a name="h.t4xdkmcfgxgs"></a><span>Concepts overview</span></h2><h3 class="c2"><a name="h.9plpwum2ndhq"></a><span>The toObservable() function</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Use the </span><span>toObservable()</span><span>&nbsp;function from the Web UI library to make a List or a Map observable. In the Writer app, making the list of documents observable enables Web UI to update your app&rsquo;s UI whenever a document is created or deleted.</span></p><h3 class="c2"><a name="h.q05y2y7gn8pj"></a><span>Template iterate</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Template loops allow iteration over Iterable Dart objects, such as Collections. To create a loop that operates on each item in an Iterable object, use the iterate attribute in a &lt;template&gt; tag. The code below displays the alphabet by looping over a list of strings, of which each string contains a single character.</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">// in Dart code</span></p><p class="c0"><span class="c1">List&lt;String&gt; alphabet = toObservable(&lsquo;abcdefghijklmnopqrstuvwxyz&rsquo;.split(&#39;&#39;));</span></p><p class="c0 c8"><span class="c1"></span></p><p class="c0"><span class="c1">// in HTML code</span></p><p class="c0"><span class="c1">&lt;template iterate=&quot;letter in alphabet&quot;&gt; {{letter}} &lt;/template&gt;</span></p><h2 class="c2"><a name="h.k15z6n5pmnu0"></a><span>Walkthrough</span></h2><p class="c2 c8"><span></span></p><p class="c2"><span>You&rsquo;ll be editing three files this time: </span><span class="c6">web/app.dart</span><span>, </span><span class="c6">web/</span><span class="c6">index.html</span><span>, and </span><span class="c6">web/</span><span class="c6">document_item.html</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>(</span><span class="c6">Optional</span><span>: Remember that if necessary, you can start with clean files for each step. If you want to, close the directory for step 2 and open the &nbsp;</span><span class="c6">io-2013-codelab-step3</span><span>&nbsp;directory now.</span><span>)</span></p><h3 class="c2"><a name="h.1jxajn4fbphg"></a><span>Add an observable list of documents</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/app.dart </span><span>and add the line of code shown below that creates an empty, observable list of documents.</span></p><p class="c2 c8"><span></span></p><a href="#" name="003e7a132719843844266db196a529a3a66c108e"></a><a href="#" name="10"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/app.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 3: Add an observed list of documents.</span></p><p class="c4 c2"><span class="c6 c1">final List&lt;Document&gt; documents = toObservable([]);</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.rcpcobm9frxp"></a><span>Add functions for creating, deleting, and selecting documents</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>First, let&rsquo;s implement </span><span>creating documents</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Continue editing </span><span class="c6">web/app.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Add the </span><span>createDocument()</span><span>&nbsp;function to </span><span class="c6">web/app.dart </span><span>where indicated by the comments. The new function calls another function, called </span><span>selectDocument(), which</span><span>&nbsp;is not defined yet and about which Dart Editor issues warnings. You&rsquo;ll add that function just below, so ignore the warnings for now.</span></p><p class="c2 c8"><span></span></p><a href="#" name="112b879928f02a95f8bcca548aa41841e8a73a8c"></a><a href="#" name="11"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/app.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 3: Create a new document.</span></p><p class="c4 c2"><span class="c6 c1">void createDocument() {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; // Create a new document.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; var doc = new Document(&#39;Untitled&#39;, &#39;&#39;);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; documents.add(doc);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; selectDocument(doc);</span></p><p class="c4 c2"><span class="c6 c1">}</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Next, let&rsquo;s implement deleting a document.</span></p><p class="c2 c8"><span></span></p><a href="#" name="bc8ccafb5db8bb95790c033c16fcedeb2df622ab"></a><a href="#" name="12"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/app.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 3: Add code to delete a document</span></p><p class="c4 c2"><span class="c6 c1">void deleteDocument(Document doc) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; documents.remove(doc);</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; // STEP 5: Also delete from local storage.</span></p><p class="c4 c2"><span class="c6 c1">}</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Now</span><span>, let&rsquo;s implement setting the currently selected, or </span><span class="c13">active</span><span>,</span><span>&nbsp;document. </span></p><p class="c2 c8"><span></span></p><a href="#" name="c3a16027a88e8921f4c86fe09a9c48ae6bd5735d"></a><a href="#" name="13"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/app.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 3: Add code to select a document.</span></p><p class="c4 c2"><span class="c6 c1">void selectDocument(Document doc, </span><span class="c6 c1">{bool markActive: false}</span><span class="c6 c1">) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; if (documents.isEmpty) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; activeDocument = null;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; } else if (doc != null &amp;&amp; documents.contains(doc) &amp;&amp; doc != activeDocument) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; // Change active document.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; activeDocument = doc;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; } else if (activeDocument != null &amp;&amp; documents.contains(activeDocument)) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; // Stay on the active document and display the editing window.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; contentActive = markActive &amp;&amp; doc == activeDocument;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; } </span><span class="c6 c1">else</span><span class="c6 c1">&nbsp;{</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; // Fall back to the last document.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; activeDocument = documents.last;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2"><span class="c6 c1">}</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>A quick note about Dart syntax. The second argument, markActive, is optional as indicated by the curly brackets. If the caller does not provide the argument, the value is </span><span>false.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Save </span><span class="c6">web/app.dart</span><span>. The Dart Editor warnings should go away.</span></p><h3 class="c2"><a name="h.t585uroxp75j"></a><span>Add document initialization to main()</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>We need a little more Dart code</span><span>&nbsp;to create</span><span>&nbsp;and select the first document.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Find the </span><span>main()</span><span>&nbsp;function and add two lines of code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="636d1459fe267ed85fead5b269c905a57617660a"></a><a href="#" name="14"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/app.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">void main() {</span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Initialize with all documents from local storage.</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 3: Create a new document if there are none.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; if (documents.isEmpty) createDocument();</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 3: Select the first document in the list of documents.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; selectDocument(documents.first);</span></p><p class="c4 c2"><span class="c6 c1">}</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Save </span><span class="c6">web/app.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Now that we have </span><span>functions that let us create, delete, and select </span><span>documents, we can create elements that provide a UI to use that functionality.</span></p><h3 class="c2"><a name="h.svl18lwba5l4"></a><span>Create new elements in web/index.html</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/index.html</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Create a + button, and set our new </span><span>createDocument()</span><span>&nbsp;function as the button&rsquo;s mouse click callback function.</span></p><p class="c2 c8"><span></span></p><a href="#" name="7ba1693380e842805638eca678d2e0155401c2cc"></a><a href="#" name="15"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;toolbar&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: Add a button to create a new document. --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; </span><span class="c6 c1">&nbsp; &lt;button on-click=&quot;createDocument()&quot;&gt;+&lt;/button&gt;</span></p><p class="c4 c2"><span class="c1">...</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Delete the old code that created a single </span><span>&lt;x-document-item&gt;</span><span>, and replace it with code that creates one </span><span>&lt;x-document-item&gt;</span><span>&nbsp;for each item in the documents list.</span></p><p class="c2 c8"><span></span></p><a href="#" name="8e2e7b784dd6a79a105a04e54a79d0730d45d82a"></a><a href="#" name="16"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: Iterate over list of documents. --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;template iterate=&quot;doc in documents&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 4: Hide documents that don&#39;t match search filter. --&gt;</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- Our custom document element! --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;x-document-item doc=&quot;{{doc}}&quot;&gt;&lt;/x-document-item&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/template&gt;</span></p><p class="c4 c2 c8"><span class="c1 c5"></span></p><p class="c4 c2"><span class="c1 c5">&lt;!-- STEP 2: Add the active document to the sidebar. --&gt;</span></p><p class="c4 c2"><span class="c1 c5">&lt;x-document-item doc=&quot;{{activeDocument}}&quot;&gt;&lt;/x-document-item&gt;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Save </span><span class="c6">web/index.dart</span><span>.</span></p><h3 class="c2"><a name="h.v26yzo8ksmbq"></a><span>Add code to select a document and to delete a document</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/document_item.html</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Now that we have </span><span>selectDocument()</span><span>&nbsp;and </span><span>deleteDocument() functions</span><span>, our custom component can use them. The following code uses the new selection function and adds an &ldquo;X&rdquo; button to </span><span>&lt;x-document-item&gt;</span><span>&nbsp;that deletes the item. Be sure to delete the &lsquo;&gt;&rsquo; from the end of the &lt;div&gt; tag.</span></p><p class="c2 c8"><span></span></p><a href="#" name="2aa4feea9f7b6c46f5c6f2a17d227fd074845302"></a><a href="#" name="17"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/document_item.html</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: On click, select the document. --&gt;</span></p><p class="c2 c42"><span class="c1">&nbsp; &nbsp; &nbsp; </span><span class="c1">&nbsp; </span><span class="c1">&lt;div</span><span class="c1">&nbsp;</span><span class="c1">class=</span><span class="c1">&quot;item {{isActiveClass}}&quot;</span><span class="c1 c5">&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; </span><span class="c1">&nbsp; &nbsp; &nbsp; </span><span class="c6 c1">&nbsp;</span><span class="c6 c1">on-click=&quot;app.selectDocument(doc, markActive: true)&quot;</span><span class="c6 c1">&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: Add delete button. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6 c1">&lt;button class=&quot;delete&quot; on-click=&quot;</span><span class="c6 c1">app.</span><span class="c6 c1">deleteDocument</span><span class="c6 c1">(doc)&quot;&gt;&amp;times;&lt;/button&gt;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Save </span><span class="c6">web/document_item.html</span><span>.</span></p><h3 class="c2"><a name="h.1e11ugbr3dv7"></a><span>Try out the new functionality</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Try it out! </span><span>Run the app.</span></p><ol class="c33" start="1"><li class="c0 c11"><span>Click the + button to create a new document.</span></li><li class="c0 c11"><span>Type in some text.</span></li><li class="c0 c11"><span>Change the document name.</span></li><li class="c0 c11"><span>Click on a document in the sidebar to select a document. A </span><span class="c31 c6">red</span><span>&nbsp;vertical line appears on the left and its contents appears in the text area.</span></li><li class="c0 c11"><span>Hover the mouse over a document in the sidebar and an &lsquo;X&rsquo; appears. Click the &lsquo;X&rsquo; to delete the document.</span></li></ol><p class="c2 c8"><span class="c1"></span></p><p class="c2"><img height="514" src="images/image07.png" width="512"></p><p class="c2 c8"><span></span></p><h1 class="c2 c17"><a name="h.ajf00hxdo4zq"></a></h1><h1 class="c2"><a name="h.1lmhpmupb94f"></a><span>Step 4: Add a search bar</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>In this step, you will learn how to connect an HTML input field to a Dart object, and then conditionally display DOM elements based on the contents from the input field.</span></p><h2 class="c2"><a name="h.qrimtew7kc7q"></a><span>What you will learn</span></h2><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Instantiate DOM elements based on conditionals.</span></li><li class="c0 c11"><span>Bind an input field to a Dart object (aka two-way data binding).</span></li></ol><h2 class="c2"><a name="h.ps3mbo8ceq0c"></a><span>Concepts overview</span></h2><h3 class="c2"><a name="h.8ja6vc9pug1j"></a><span>Template conditionals</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>The contents of a </span><span>&lt;template&gt;</span><span>&nbsp;tag can be added to, or removed from, the DOM based on a </span><span class="c13">conditional</span><span>. If a conditional is true, the contents of the </span><span>&lt;template&gt;</span><span>&nbsp;are added to the DOM (in other words, the contents are displayed on the page). If the conditional is false, the contents are removed from the page.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Here is a simple example of a conditional template:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">&lt;template if=&quot;user.</span><span class="c1">agreedToTOS</span><span class="c1">&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; Thanks for clicking agree!</span></p><p class="c0"><span class="c1">&lt;/template&gt;</span></p><p class="c0 c8"><span></span></p><p class="c2"><span>Every time the conditional changes (from false to true, or from true to false), the contents are added or removed.</span></p><h3 class="c2"><a name="h.2ud8exsdflt4"></a><span>Field binding</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>An HTML input field, such as a text input, can be bound to a Dart object. Whenever the input field&#39;s value changes, the </span><span>Dart object</span><span>&#39;s value </span><span>change</span><span>s. Whenever the Dart object&#39;s value changes, the input field changes. This is known as </span><span class="c13">two-way binding</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Here is a simple User class:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">class User {</span></p><p class="c0"><span class="c1">&nbsp; String username;</span></p><p class="c0"><span class="c1">}</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Here is a simple example of an input field binding:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">&lt;input type=&quot;text&quot; name=&quot;username&quot; bind-value=&quot;</span><span class="c1">user.username&quot;&gt;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The value property of the input field is bound to the username field of the </span><span class="c30">user</span><span>&nbsp;object&mdash;an instance of the </span><span class="c30">User</span><span>&nbsp;class.</span></p><h2 class="c2"><a name="h.7otqcta04eui"></a><span>Walkthrough</span></h2><h3 class="c2"><a name="h.gywvipbftj46"></a><span>Create a new library</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>To help you get started, we&#39;ve given you the shell for the new search library.</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Right-click on the </span><span class="c6">lib</span><span>&nbsp;directory and select &quot;</span><span class="c6">New File</span><span>&quot;.</span></li><li class="c0 c11"><span>Name this file &quot;search.dart&quot;.</span></li><li class="c0 c11"><span>Open </span><span class="c6">__for_later/search.dart</span><span>, copy its contents, and paste into </span><span class="c6">lib/search.dart</span><span>.</span></li></ol><h3 class="c2"><a name="h.3tpsh4ob2nhr"></a><span>Observe the search filter</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>You need to add a top-level field that will contain the search filter.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Add the following code to </span><span class="c6">lib/search.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><a href="#" name="a042056057108e3f45766defec5c9081e7b61fd4"></a><a href="#" name="18"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// lib/search.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">import &#39;package:writer/document.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 4: Add an observed string to filter documents.</span></p><p class="c4 c2"><span class="c6 c1">@observable</span></p><p class="c4 c2"><span class="c6 c1">String searchFilter = &#39;&#39;;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.1i3dq5f7oc85"></a><span>Filter documents</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Now that you have an observable </span><span>searchFilter</span><span>&nbsp;string, you can filter documents.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Inside of </span><span class="c6">lib/search.dart</span><span>, add the following code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="dd9b7b447779506c855362f9779578a1cba8ee6f"></a><a href="#" name="19"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// lib/search.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 4: Add function to check if a document matches the search filter.</span></p><p class="c4 c2"><span class="c6 c1">bool matchesSearchFilter(Document doc) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; if (searchFilter.isEmpty) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; return </span><span class="c6 c1">true</span><span class="c6 c1">;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; return doc.title.toLowerCase().contains(searchFilter.toLowerCase()) ||</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;doc.content.toLowerCase().contains(searchFilter.toLowerCase());</span></p><p class="c4 c2"><span class="c6 c1">}</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Notice that </span><span>searchFilter.isEmpty</span><span>&nbsp;is a </span><span class="c13">getter</span><span>&mdash;it doesn&rsquo;t have trailing parentheses.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Save your changes.</span></p><h3 class="c2"><a name="h.obmom9hrtjt0"></a><span>Import search into app</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>With the search library complete, you need to import it into the main application.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/app.dart</span><span class="c6">&nbsp;</span><span>and add the following code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="6d5fb425ce24bad33322b62ea263a2e8ca1e30e2"></a><a href="#" name="20"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/app.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">import &#39;package:writer/document.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 4: Import search.dart.</span></p><p class="c4 c2"><span class="c6 c1">import &#39;package:writer/search.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 5: Import storage.dart.</span></p><p class="c4 c2"><span class="c6 c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>To keep the path to </span><span class="c6">search.dart</span><span class="c6">&nbsp;</span><span>relative to </span><span class="c6">app.dart</span><span>, we use the </span><span>package:</span><span>&nbsp;import method to import the search.dart library from the writer package. The </span><span class="c6">pubspec.yaml</span><span class="c6">&nbsp;</span><span>file declares the writer package. The </span><span>pub</span><span>&nbsp;command creates all the necessary symlinks to allow you to not have to create import paths like &#39;</span><span>../../lib/search.dart</span><span>&#39;.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Save your changes.</span></p><h3 class="c2"><a name="h.uf0oq3wrab9x"></a><span>Input field for filter</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Let&#39;s turn our attention to the HTML for the search box. You added the observable </span><span>searchFilter</span><span>&nbsp;field in </span><span>search.dart</span><span>, now let&#39;s bind that into an HTML input field.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/index.html</span><span class="c6">&nbsp;</span><span>and add the following code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="4d0cc0c5260d42270a69014b961ab05e5235b5d1"></a><a href="#" name="21"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;input-wrap&quot;&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 4: Add a input box to filter documents. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6 c1">&lt;input type=&quot;text&quot; placeholder=&quot;Filter documents...&quot; bind-value=&quot;searchFilter&quot;&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c1">&lt;/</span><span class="c1">div</span><span class="c1">&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>The variable name </span><span class="c13">searchFilter</span><span>&nbsp;must match the string inside of the bind-value attribute.</span></p><h3 class="c2"><a name="h.mtf4udav2d7n"></a><span>Dynamically hide or show docs based on the filter</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>When the search filter changes, we want to dynamically update the documents displayed on the page.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Continue editing </span><span class="c6">web/index.html</span><span class="c6">&nbsp;</span><span>and add the following code:</span></p><p class="c2 c8"><span></span></p><a href="#" name="6d3da29ef7fd3926adfaf6eb70944e90a5d04c92"></a><a href="#" name="22"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 3: Iterate over list of documents. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;template iterate=&quot;doc in documents&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 4: Hide documents that don&#39;t match search filter. --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;template if=&quot;matchesSearchFilter(doc)&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- Our custom document element! --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;x-document-item doc=&quot;{{doc}}&quot;&gt;&lt;/x-document-item&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/template&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/template&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Notice that you are placing the conditional template within the template loop.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The Web UI library knows that </span><span>matchesSearchFilter</span><span>&nbsp;relies on </span><span>searchFilter</span><span>, so whenever </span><span>searchFilter</span><span>&nbsp;changes, it re-runs this template. Only those documents that pass </span><span>matchesSearchFilter</span><span>&nbsp;will be displayed with the custom </span><span>&lt;x-document-item&gt;</span><span>&nbsp;tag.</span></p><p class="c2 c8"><span></span></p><h2 class="c2"><a name="h.j1j21dxjix9k"></a><span>Run the code</span></h2><p class="c2"><span>Time to run the code! After completing this step, you should be able to search for documents by title or contents. The search results are live. </span><span class="c13">Note</span><span>: there is a known bug, if the currently opened document does not match the filter, it won&#39;t disappear.</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="294" src="images/image10.jpg" width="506"></p><p class="c2 c8"><span></span></p><p class="c2"><span>If you do not see the input field for the filter, run </span><span class="c6">Tools &gt; Reanalyze Sources</span><span>.</span></p><hr style="page-break-before:always;display:none;"><p class="c2 c8"><span></span></p><h1 class="c2"><a name="h.fwk2fgwdpcgv"></a><span>Step 5: Adding local storage</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>In this step, you learn how to save the user&rsquo;s documents in local storage, and later to remove the documents. In addition to saving the documents in local storage, the app also maintains a list of document IDs in local storage. The </span><span>main()</span><span>&nbsp;function uses </span><span>this </span><span>list to initialize the app and load the first document. The app saves the documents as JSON-formatted strings. You also learn how to use the JSON library to serialize and revive the document contents.</span></p><h2 class="c2"><a name="h.69edvk1ggsqx"></a><span>What you will learn</span></h2><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Save documents in local storage.</span></li><li class="c0 c11"><span>Remove documents from local storage.</span></li><li class="c0 c11"><span>Maintain a list of document IDs in local storage.</span></li><li class="c0 c11"><span>Use JSON to read and write the contents of the documents.</span></li></ol><h2 class="c2"><a name="h.sjarbfxvehu8"></a><span>Concepts overview</span></h2><h3 class="c2"><a name="h.ugi5xom80b1x"></a><span>Local storage</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Local storage can be </span><span>use</span><span>&nbsp;to keep persistent data between invocations of your app. The data may only be accessed by the origin that created it. The Window object that hosts the web app has a localStorage object that your code can use to store and retrieve data. The local storage object is implemented as a Map&lt;String, String&gt;. </span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Save data in local storage by putting a key/value pair in the localStorage object.</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">window.localStorage[&#39;key1&#39;] = &#39;val1&#39;;<br>window.localStorage[&#39;key2&#39;] = &#39;val2&#39;;<br>window.localStorage[&#39;key3&#39;] = &#39;val3&#39;;</span></p><p class="c2 c8"><span class="c30"></span></p><p class="c2"><span>Delete data from local storage by removing a key/value pair from the </span><span>localStorage</span><span>&nbsp;object.</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">window.localStorage.</span><span class="c1">remove</span><span class="c1">([&#39;key1&#39;]);</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>You can use </span><span><a class="c15" href="http://api.dartlang.org/dart_core/Map.html">Map</a></span><span>&nbsp;APIs such as containsValue(), clear(), and length:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">assert(window.localStorage.containsValue(&#39;does not exist&#39;) == false);<br>window.localStorage.clear();<br>assert(window.localStorage.length == 0);</span></p><h3 class="c2"><a name="h.o8ej7ha012l6"></a><span>JSON</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>JSON is a text-based, human-friendly format for representing data of different types. The dart:json library has two useful functions for converting data to/from JSON: stringify() and parse(). Here&rsquo;s a small example that converts a list of objects to JSON and back again.</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">import </span><span class="c1">&#39;</span><span class="c1">dart:json</span><span class="c1">&#39;</span><span class="c1">&nbsp;as JSON;</span></p><p class="c0 c8"><span class="c1"></span></p><p class="c0"><span class="c1">var list = [1, &quot;two&quot;, 3.0]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // a list of objects</span></p><p class="c0"><span class="c1">String listAsString = JSON.stringify(list); // convert list of objects to JSON string</span></p><p class="c0"><span class="c1">print(listAsString); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// [1,&quot;two&quot;,3.0]</span></p><p class="c0"><span class="c1">var revivedList = JSON.parse(listAsString); // convert JSON string to list object</span></p><p class="c0"><span class="c1">print(revivedList); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // [1, two, 3.0]</span></p><h2 class="c2"><a name="h.36ilmen4pg0r"></a><span>Walkthrough</span></h2><h3 class="c2"><a name="h.q7i5j58pkjsj"></a><span>Create a library to handle local storage.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>This step requires you to edit three files: </span><span class="c6">lib/</span><span class="c6">storage.dart</span><span>, </span><span class="c6">web/</span><span class="c6">index.html</span><span>, and </span><span class="c6">web/</span><span class="c6">app.dart</span><span>. Let&rsquo;s begin with </span><span class="c6">storage.dart</span><span>.</span></p><h3 class="c2"><a name="h.3tndkjgajsf7"></a><span>Save a document to local storage. Add the document ID to the list.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>To help you get started, we&#39;ve given you the shell for the new local storage library.</span></p><p class="c2 c8"><span></span></p><ol class="c12" start="1"><li class="c0 c11"><span>Right-click on the </span><span class="c6">lib</span><span>&nbsp;directory and select &quot;</span><span class="c6">New File</span><span>&quot;.</span></li><li class="c0 c11"><span>Name this file &quot;storage.dart&quot;.</span></li><li class="c0 c11"><span>Open </span><span class="c6">__for_later/storage.dart, </span><span>copy its contents, and paste it into </span><span class="c6">lib/storage.dart</span><span>.</span></li></ol><p class="c2 c8"><span></span></p><p class="c2"><span>Modify the </span><span>saveDocument()</span><span>&nbsp;function. Add the code, shown in bold below,</span></p><ol class="c12" start="1"><li class="c0 c11"><span>to convert the document to a JSON-formatted string and save it in the window&rsquo;s local storage,</span></li><li class="c0 c11"><span>to add the document ID to the internal list of IDs, if necessary,</span></li><li class="c0 c11"><span>and finally, to save the list of document IDs, in JSON format, to the local storage</span><span>.</span></li></ol><p class="c2 c8"><span></span></p><a href="#" name="11f012b03fe1c09376f0858633759211354f25a7"></a><a href="#" name="23"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// storage.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- Document title --&gt;</span></p><p class="c4 c2"><span class="c1">/// Save the document to local storage.</span></p><p class="c4 c2"><span class="c1">void saveDocument(Document doc) {</span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Save the serialized version of the document to local storage.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; window.localStorage[doc.id] = doc.toJson();</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Add the new document ID to our list of document IDs.</span></p><p class="c4 c2"><span class="c1">&nbsp; </span><span class="c6 c1">if </span><span class="c6 c1">(!_storedIds.contains(doc.id)) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; _storedIds.add(</span><span class="c6 c1">doc.id);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Update local storage map of IDs.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; window.localStorage[DOCUMENT_ID_KEY] = JSON.stringify(_storedIds);</span></p><p class="c4 c2"><span class="c1">}</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.wjjh2u48r262"></a><span>Remove the document from local storage. Remove the document ID from the list.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Continue editing </span><span class="c6">lib/</span><span class="c6">storage.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Modify the </span><span>removeDocument()</span><span>&nbsp;function. Add the code</span></p><ol class="c12" start="1"><li class="c0 c11"><span>to remove the document ID from the internal list,</span></li><li class="c0 c11"><span>to remove the document from local storage, </span></li><li class="c0 c11"><span>and to save the list of document IDs in local storage.</span></li></ol><p class="c2 c8"><span></span></p><a href="#" name="3177dcfaa26d24b52d0428abf91f2cb328fae133"></a><a href="#" name="24"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// storage.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">/// Removes the document from local storage.</span></p><p class="c4 c2"><span class="c1">void removeDocument(Document doc) {</span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Remove the document from local storage.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; _storedIds.remove(doc.id);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; window.localStorage.remove(doc.id);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; window.localStorage[DOCUMENT_ID_KEY] = JSON.stringify(_storedIds);</span></p><p class="c4 c2"><span class="c1">}</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.iu894renpog2"></a><span>Load the list of IDs from local storage. Then load the documents.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Continue editing </span><span class="c6">lib/storage.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Modify the </span><span>fetchDocuments()</span><span>&nbsp;function. Add the code</span></p><ol class="c12" start="1"><li class="c0 c11"><span>to get the list of document IDs</span></li><li class="c0 c11"><span>to load all of the documents from local storage using the private method </span><span>_fetchDocument()</span></li><li class="c0 c11"><span>and to display one of the documents.</span></li></ol><p class="c2 c8"><span></span></p><a href="#" name="9828f087ea9465c35bd79ae04bfae6e8749c67e0"></a><a href="#" name="25"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// storage.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">// Returns a collection of all documents from local storage.</span></p><p class="c4 c2"><span class="c1">Iterable&lt;Document&gt; fetchDocuments() {</span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Get all document IDs from local storage.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; if (window.localStorage[DOCUMENT_ID_KEY] != null) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; _storedIds = JSON.parse(window.localStorage[DOCUMENT_ID_KEY]);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Get all documents from local storage.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; return _storedIds.map(_fetchDocument);</span></p><p class="c4 c2"><span class="c1">}</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">/// Gets a document from local storage.</span></p><p class="c4 c2"><span class="c1">Document _fetchDocument(String id) {</span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Return one deserialized document from local storage.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; return new Doc</span><span class="c6 c1">ument.fromJson</span><span class="c6 c1">(window.localStorage[id]);</span></p><p class="c4 c2"><span class="c1">}</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Save your changes to </span><span class="c6">lib/</span><span class="c6">storage.dart</span><span>.</span></p><p class="c2 c8"><span class="c30"></span></p><h3 class="c2"><a name="h.i3h5dbyw0vmu"></a><span>Add event handlers to HTML elements to save the document.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Now that you&rsquo;ve written the library code that saves and retrieves documents, you can use the new functions in the app. The app saves the documents based on user-generated events in the UI. So let&rsquo;s add event handlers to the HTML elements for saving the documents.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Open the </span><span class="c6">web/index.html </span><span>file.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Find the code that creates the text element for the document titles.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Add a key-up event handler to the text field. Each time the user types a character in the document title, the event handler saves the document.</span></p><p class="c2 c8"><span></span></p><a href="#" name="36ceaf585c6c68044bee5323e8e8b9b547788375"></a><a href="#" name="26"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- Document title --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;input-wrap&quot;&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 5: Add event handler to save the active document. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c1 c5">&lt;input type=&quot;text&quot; bind-value=&quot;activeDocument.title&quot;&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;text&quot; bind-value=&quot;activeDocument.title&quot;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6 c1">on-key-up=&quot;saveDocument(activeDocument)&quot; </span><span class="c1">/&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>Now, find the textarea used to enter the contents of a document.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Add a key-up event handler to the textarea. Each time the user types a character into the document, the event handler saves the document.</span></p><p class="c2 c8"><span></span></p><a href="#" name="bbf4a6a118e5f14b13909f187048196681e275a6"></a><a href="#" name="27"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- Content box --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- STEP 5: Add event handler to save the active document. --&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c1 c5">&lt;textarea class=&quot;content&quot; bind-value=&quot;activeDocument.content&quot;&gt;&lt;/textarea&gt;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6 c1">&lt;textarea class=&quot;content&quot; bind-value=&quot;activeDocument.content&quot;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; on-key-up=&quot;saveDocument(activeDocument)&quot;&gt;&lt;/textarea&gt;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span class="c6 c28"></span></p><p class="c2"><span>Save your changes to </span><span class="c6">web/index.html </span><span>.</span></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.yvyngs2ay112"></a><span>Import storage.dart</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>For removing documents and initializing the app, you need to edit the Dart code.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/app.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Add an import directive near the top of the file to include the </span><span>storage.dart</span><span>&nbsp;library you just wrote.</span></p><p class="c2 c8"><span></span></p><a href="#" name="a92b059e6f7083b59c32c8e671b4914e90e06269"></a><a href="#" name="28"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// app.dart</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">@observable</span></p><p class="c4 c2"><span class="c1">library writer;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">import &#39;dart:html&#39; hide Document;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">import &#39;package:web_ui/web_ui.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">import &#39;package:writer/document.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 4: Import search.dart.</span></p><p class="c4 c2"><span class="c1">import &#39;package:writer/search.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 5: Import storage.dart.</span></p><p class="c4 c2"><span class="c6 c1">import &#39;package:writer/storage.dart&#39;;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">// STEP 3: Add an observed list of documents.</span></p><p class="c4 c2"><span class="c1">final List&lt;Document&gt; documents = toObservable([]);</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.s8iyjgjt4pp0"></a><span>Initialize the app with the locally stored documents.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Continue editing </span><span class="c6">web/app.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Modify the </span><span>main()</span><span>&nbsp;function in </span><span>app.dart</span><span>. Use the </span><span>fetchDocuments()</span><span>&nbsp;function from the </span><span>storage.dart </span><span>library to initialize the app with the saved documents.</span></p><p class="c2 c8"><span></span></p><a href="#" name="6e5b6db4508be6d53f4dd8844b2b23840627fdc9"></a><a href="#" name="29"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// app.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">/// Starts the application.</span></p><p class="c4 c2"><span class="c1">void main() {</span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 5: Initialize with all documents from local storage.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; documents.addAll(fetchDocuments());</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 3: Create a new document if there are none.</span></p><p class="c4 c2"><span class="c1">&nbsp; if (documents.isEmpty) createDocument();</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; // STEP 3: Select the first document in the list of documents.</span></p><p class="c4 c2"><span class="c1">&nbsp; selectDocument(documents.first);</span></p><p class="c4 c2"><span class="c1">}</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.yxdyhxlthy8j"></a><span>Remove the document from local storage.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Continue editing </span><span class="c6">web/app.dart</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Find the </span><span>deleteDocument()</span><span>&nbsp;function. Add code to remove the document from local storage when the user deletes the document from the app.</span></p><p class="c2 c8"><span></span></p><a href="#" name="b03749e9a6ec5397397d6f8871b2330fb9cafeac"></a><a href="#" name="30"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// app.dart</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">// STEP 3: Add code to delete a document</span></p><p class="c4 c2"><span class="c1">void deleteDocument(Document doc) {</span></p><p class="c4 c2"><span class="c1">&nbsp; documents.remove(doc);</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">&nbsp; </span><span class="c1">// STEP 5: Also delete from local storage.</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; removeDocument(doc);</span></p><p class="c4 c2"><span class="c1">}</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><h3 class="c38 c2"><a name="h.6ky98xskme83"></a></h3><p class="c2"><span>Save your changes to </span><span class="c6">web/app.dart</span><span>.</span></p><h3 class="c2"><a name="h.ifs5zdb93rhi"></a><span>Run the revised version of the app.</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>You&rsquo;ve completed the code edits for this step. Make sure all of your changes are saved.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Run the app again. Create and name several documents. Kill the app and start it up again. The documents you saved persist between invocations of the app.</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="377" src="images/image06.png" width="588"></p><p class="c2 c8"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c2 c8"><span></span></p><h1 class="c2"><a name="h.ymcy9fqorpug"></a><span>Step 6: Optimize layout for mobile devices</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>Your app already works on mobile, since many gestures emulate mouse events, such as clicks. But we can do better. In this step, you&rsquo;ll make your app feel more native on mobile by adding some code to control layout on mobile devices and by adding some specialized CSS styles.</span></p><h2 class="c2"><a name="h.v8hspt230iyp"></a><span>What you will learn</span></h2><ol class="c12" start="1"><li class="c0 c11"><span>Using a meta tag to control layout on mobile devices</span></li><li class="c0 c11"><span>CSS styles for mobile devices</span></li></ol><h2 class="c2"><a name="h.10tsfye06kbe"></a><span>Concepts overview</span></h2><h3 class="c2"><a name="h.uu51nii9tdjq"></a><span class="c24 c6">Control</span><span class="c6 c24">&nbsp;layout on mobile devices</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>The &lt;meta&gt; tag, with the viewport attribute, helps to optimize your site for mobile devices. Here&rsquo;s what the Mozilla developer website has to say about mobile-optimization:</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>A typical mobile-optimized site contains something like the following:</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;&gt;</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The width property controls the size of the viewport. It can be set to a specific number of pixels, like width=600, or to the special value device-width, which is the width of the screen in CSS pixels at a scale of 100%. (The content attribute also supports corresponding height and device-height values, which may be useful for pages with elements that change size or position based on the viewport height.)</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The initial-scale property controls the zoom level when the page is first loaded. The maximum-scale, minimum-scale, and user-scalable properties control how users are allowed to zoom the page in or out.</span></p><h3 class="c2"><a name="h.3q4tho2o4biu"></a><span>CSS styles for mobile devices</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>The @media rule allows different style rules for different media in the same style sheet. Shown below are two rules, one which applies when the app runs in an environment, such as a small mobile device, which has a maximum width of 500 pixels. The other applies when the app runs in an environment that allows a larger width.</span></p><p class="c2 c8"><span></span></p><p class="c0"><span class="c1">@media all and (max-width: 500px) {</span></p><p class="c0"><span class="c1">&nbsp; &hellip;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0"><span class="c1">@media all and (min-width: 501px) {</span></p><p class="c0"><span class="c1">&nbsp; &hellip;</span></p><p class="c0"><span class="c1">} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&nbsp;</span><span class="c1 c46">&nbsp;</span></p><h2 class="c2"><a name="h.jjv7ulrpc81s"></a><span>Walkthrough</span></h2><h3 class="c2"><a name="h.xg2egxktuosa"></a><span>Run the app in a small browser window</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Before you start changing the code, run the app in a tiny window so you can emulate the app&rsquo;s behavior on a mobile phone. You can contrast this behavior with the revised version of the app at the end of this step.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Run the app. Shrink the window down as small as you can.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>The UI is not too cluttered and has a double scroll bar. We can do better!</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="272" src="images/image01.png" width="400"></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.vngw9eips6yz"></a><span>Add meta viewport tag to HTML code</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>O</span><span>pen </span><span class="c6">web/index.html</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>At the top of the file, within the </span><span>&lt;head&gt;</span><span>&nbsp;section add this meta tag:</span></p><p class="c2 c8"><span></span></p><a href="#" name="cc55c23dce922449740b2782ba379e471cf2ed0b"></a><a href="#" name="31"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/index.html</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2"><span class="c1">&nbsp; &nbsp; &lt;!-- STEP 6: Add viewport meta tag to control layout on mobile devices --&gt;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &lt;meta name=&quot;viewport&quot;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;&gt;</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>This tag fixes the size of the app to the exact size of the device.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Save your changes.</span></p><h3 class="c2"><a name="h.c683e43ehs76"></a><span>Add CSS styles for mobile</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Open </span><span class="c6">web/css.css</span><span>.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>At the bottom of the CSS file, add all of the code in bold (79 lines):</span></p><p class="c2 c8"><span></span></p><a href="#" name="8c019440a77031fbfe7e164dfc4fbe6b68f77295"></a><a href="#" name="32"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c22"><td class="c19"><p class="c4 c2"><span class="c1">// web/css.css</span></p><p class="c4 c2"><span class="c1">&hellip;</span></p><p class="c4 c2 c8"><span class="c1"></span></p><p class="c4 c2"><span class="c1">/* STEP 6: Add styles for mobile devices */</span></p><p class="c4 c2"><span class="c1">/* Mobile styles. */</span></p><p class="c4 c2"><span class="c6 c1">@media all and (max-width: 500px) {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; body {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; overflow: hidden;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #sidebar .touched .item {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; background-color:rgba(250, 150, 150, .8);</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transition: all .7s cubic-bezier(.65,-0.50,.76,1.32);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transition: all .7s cubic-bezier(.65,-0.50,.76,1.32);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transition: all .7s cubic-bezier(.65,-0.50,.76,1.32);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #sidebar {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; top: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; left: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; right: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; bottom: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; width: 100%;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transition: -webkit-transform 0.3s ease-in-out;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transition: -moz-transform 0.3s ease-in-out;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transition: transform 0.3s ease-in-out;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transform: translate3d(-20%, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transform: translate3d(-20%, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transform: translate3d(-20%, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #sidebar.active {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transform: translate3d(0, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transform: translate3d(0, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transform: translate3d(0, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #sidebar .item.active .delete {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; opacity: .7;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #main {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; top: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; left: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; right: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; bottom: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transition: -webkit-transform 0.3s ease-in-out;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transition: -moz-transform 0.3s ease-in-out;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transition: transform 0.3s ease-in-out;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transform: translate3d(100%, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transform: translate3d(100%, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transform: translate3d(100%, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #main.active {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transform: translate3d(0, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transform: translate3d(0, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transform: translate3d(0, 0, 0);</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #main .title button {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; display: block;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #main .title .input-wrap {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; margin-left: 40px;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; /* Let&#39;s not go there. It is a silly place. */</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #main:only-of-type {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -moz-transition: none;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; -webkit-transition: none;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; transition: none;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #main:only-of-type button {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; display: none;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2 c8"><span class="c6 c1"></span></p><p class="c4 c2"><span class="c6 c1">&nbsp; #main:only-of-type .title .input-wrap {</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; &nbsp; margin-left: 0;</span></p><p class="c4 c2"><span class="c6 c1">&nbsp; }</span></p><p class="c4 c2"><span class="c6 c1">}</span></p></td></tr></tbody></table><p class="c2 c8"><span></span></p><p class="c2"><span>This code separates the app into two panels: one for the index of documents and one for the content of the current document. Choosing a document from the index slides the content panel into view. In the contents panel, a new button slides from the documents contents back to the index.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Save your changes.</span></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.vcike6sk25tj"></a><span>Run the revised version of the app</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>Run the new version of the app in your browser and shrink the window down as small as possible once again.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>On the document index panel, you see a list of the documents you&rsquo;ve created.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Click a document to view its contents.</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="272" src="images/image15.png" width="400"></p><p class="c2 c8"><span></span></p><p class="c2"><span>On the document contents panel, a small button with an arrow </span><span class="c30">&lsquo;</span><span class="c30">&lt;&rsquo;</span><span>&nbsp;appears to the left of the document title.</span></p><p class="c2 c8"><span></span></p><p class="c2"><span>Click it to return to the document index.</span></p><p class="c2 c8"><span></span></p><p class="c2"><img height="272" src="images/image39.png" width="400"></p><p class="c2 c8"><span></span></p><h3 class="c2"><a name="h.6wxrrse7px8b"></a><span>Run the finished app on your phone</span></h3><p class="c2 c8"><span></span></p><p class="c2"><span>You can find the deployed app at:</span></p><p class="c2 c8"><span></span></p><p class="c2"><span class="c18 c6"><a class="c15" href="http://dart-lang.github.io/io-2013-dart-codelab/deploy/out/index.html">http://dart-lang.github.io/io-2013-dart-codelab/deploy/out/index.html</a></span><span class="c6"><br></span></p><p class="c2"><span>A shortcut: </span><span class="c18 c6"><a class="c15" href="http://goo.gl/hC0NM">goo.gl/hC0NM</a></span><span class="c6">&nbsp;<br></span></p><h1 class="c2"><a name="h.itu7egiz6osy"></a><span>What next?</span></h1><p class="c2 c8"><span></span></p><p class="c2"><span>Congratulations, you&rsquo;ve completed the code lab! If you&rsquo;d like to do more Dart, check out our website and open-source projects:</span></p><p class="c2 c8"><span></span></p><ol class="c33" start="1"><li class="c0 c11"><span class="c18"><a class="c15" href="http://www.dartlang.org">www.dartlang.org</a></span><span>&nbsp;(our website)</span></li><li class="c0 c11"><span class="c18"><a class="c15" href="http://pub.dartlang.org">pub.dartlang.org</a></span><span>&nbsp;(packages available for you to use)</span></li><li class="c0 c11"><span class="c18"><a class="c15" href="http://dart.googlecode.com">dart.googlecode.com</a></span><span>&nbsp;(Dart open-source project)</span></li><li class="c0 c11"><span class="c18"><a class="c15" href="https://github.com/dart-lang/dartlang.org">github.com/dart-lang/dartlang.org</a></span><span><a class="c15" href="https://github.com/dart-lang/dartlang.org">&nbsp;(the so</a></span><span>urce for </span><span class="c18"><a class="c15" href="http://www.dartlang.org">www.dartlang.org</a></span><span>; pull requests welcome!)</span></li></ol><p class="c2 c8"><span></span></p><div><p class="c10 c2 c8"><span></span></p></div><div class="c40"><p class="c4 c2"><a href="#cmnt_ref1" name="cmnt1">[a]</a><span>Chris Buckett:</span></p><p class="c4 c2"><span>This can also be in an external file.</span></p></div></body></html>